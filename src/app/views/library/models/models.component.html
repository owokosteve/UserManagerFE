<div class="p2 flex flex-column g1">
  <div>
    <h2 class="tcBrand">Service Models</h2>
    <div class="flex flex-wrap items-center g2">
      <app-ej-search (searchValue)="onSearch($event)"> </app-ej-search>
      <ejs-dropdownlist [dataSource]='namespaces' [value]="selectedNamespace" cssClass="e-bigger" (select)="onNamespaceSelect($event)" [allowFiltering]='true' [showClearButton]=true [filterType]="filterType"></ejs-dropdownlist>
      <ejs-dropdownlist [dataSource]='modelTypes' [value]="selectedType" cssClass="e-bigger" (select)="onTypeSelect($event)" [allowFiltering]='true' [showClearButton]=true [filterType]="filterType"></ejs-dropdownlist>
    </div>
  </div>

  <div *ngIf="!isLoading && !error">
    <div class="flex flex-column g3" *ngIf="filteredModels.length > 0">
      <div class="bcPrimary border rounded p2" *ngFor="let model of filteredModels">
        <div class="flex items-center flex-wrap g2">
          <span class="p1 rounded font-600 font-12 uppercase"
                [ngClass]="getModelTypeClass(model)">
            {{ getModelTypeName(model) }}
          </span>
          <span class="tcBrand font-600 font-18">{{ model.name }}</span>
          <span class="tcSecondaryText font-12 bcSecondary p1 rounded">{{ model.namespace }}</span>
        </div>

        <div class="flex flex-column g2">
          <p *ngIf="model.description" class="tcSecondaryText font-14">{{ model.description }}</p>

          <div *ngIf="model.inheritance && model.inheritance.length > 0" class="flex flex-column g1">
            <h5 class="tcPrimaryText font-14 font-600">Inherits from:</h5>
            <span class="tcSecondaryText bcSecondary p1 rounded font-14">{{ getInheritanceDisplay(model) }}</span>
          </div>

          <div *ngIf="model.properties.length > 0" class="flex flex-column g1">
            <h5 class="tcPrimaryText font-14 font-600">{{ model.isEnum ? 'Values:' : 'Properties:' }}</h5>
            <div class="bcSecondary border rounded overflow-hidden">
              <div class="flex bcTertiary border-bottom font-600 tcPrimaryText">
                <span class="p1 border-right flex-auto">Name</span>
                <span class="p1 border-right" style="width: 120px;">Type</span>
                <span class="p1 border-right" style="width: 100px;">Attributes</span>
                <span class="p1" style="width: 100px;" *ngIf="!model.isEnum">Default</span>
              </div>
              <div class="flex border-bottom items-start" *ngFor="let property of model.properties; last as isLast" [class.border-bottom]="!isLast">
                <div class="p1 border-right flex-auto">
                  <span class="font-600 tcPrimaryText">{{ property.name }}</span>
                  <p *ngIf="property.description" class="tcSecondaryText font-12 mt1">{{ property.description }}</p>
                </div>
                <div class="p1 border-right tcError font-13" style="width: 120px;">{{ property.type }}</div>
                <div class="p1 border-right flex flex-column g1" style="width: 100px;">
                  <span class="font-11 bcTertiary tcPrimaryText p1 rounded" *ngIf="property.isReadOnly">readonly</span>
                  <span class="font-11 bcWarning tcPrimaryText p1 rounded" *ngIf="property.isNullable">nullable</span>
                </div>
                <div class="p1 tcSecondaryText font-12" style="width: 100px;" *ngIf="!model.isEnum">
                  <span *ngIf="property.defaultValue">{{ property.defaultValue }}</span>
                  <span *ngIf="!property.defaultValue" class="tcTertiaryText">-</span>
                </div>
              </div>
            </div>
          </div>

          <div class="text-align-center tcSecondaryText" *ngIf="model.properties.length === 0">
            <p>No properties defined for this {{ getModelTypeName(model).toLowerCase() }}.</p>
          </div>
        </div>
      </div>
    </div>

    <div class="text-align-center p4" *ngIf="filteredModels.length === 0">
      <p class="tcSecondaryText">No models found matching your criteria.</p>
    </div>
  </div>

  <div class="flex items-center justify-center" style="height: 200px;" *ngIf="isLoading">
    <div>
      <p class="tcSecondaryText">Loading service models...</p>
    </div>
  </div>

  <div class="flex items-center justify-center" style="height: 200px;" *ngIf="error">
    <div class="text-align-center flex flex-column g1">
      <h3 class="tcError">Error Loading Models</h3>
      <p class="tcError">{{ error }}</p>
      <p class="tcSecondaryText">Make sure the service documentation is available.</p>
    </div>
  </div>
</div>
